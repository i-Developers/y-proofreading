/*!
 * y-proofreading 0.0.1
 * Copyright (c) 2019 Technote <technote.space@gmail.com> (https://technote.space)
 * License: GPL-3.0
 */!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=5)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NOTICE_ID=t.SIDEBAR_SIZE=t.CLOSE_MODAL=t.OPEN_MODAL=t.SET_RESPONSE=t.START=t.storeName=void 0;var r=n(1);t.storeName=r.pluginName,t.START="@@YPROOFREADING/START",t.SET_RESPONSE="@@YPROOFREADING/SET_RESPONSE",t.OPEN_MODAL="@@YPROOFREADING/OPEN_MODAL",t.CLOSE_MODAL="@@YPROOFREADING/CLOSE_MODAL",t.SIDEBAR_SIZE="@@YPROOFREADING/SIDEBAR_SIZE",t.NOTICE_ID="YPROOFREADING_MESSAGE"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.pluginName="y-proofreading",t.iconSize=20},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.html,n=e.items;return wp.element.createElement(o,{className:"proofreading-tab-panel",activeClass:"is-active",tabs:[{name:"contents-tab",title:yproofreading_params.translate["Proofreading contents"],className:"contents-tab proofreading__panel-tab"},{name:"items-tab",title:yproofreading_params.translate["Proofreading info"],className:"items-tab proofreading__panel-tab"}]},function(e){return wp.element.createElement(l,null,"contents-tab"===e.name&&wp.element.createElement(a.default,{html:t}),"items-tab"===e.name&&wp.element.createElement(r.default,{items:n}))})};var r=i(n(8)),a=i(n(9));function i(e){return e&&e.__esModule?e:{default:e}}var o=wp.components.TabPanel,l=wp.element.Fragment},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.apiFetch=function(e,t){return{type:"API_FETCH",method:e,args:t}},t.apiCancel=function(e){return{type:"API_CANCEL",method:e}},t.dispatch=function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return{type:"DISPATCH",storeKey:e,actionName:t,args:r}},t.select=function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return{type:"SELECT",storeKey:e,selectorName:t,args:r}};var r,a=n(4),i=(r=a)&&r.__esModule?r:{default:r};function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}t.default={API_FETCH:function(e){var t=e.method,n=e.args;return window[yproofreading_params.api_class].ajax(t,n).then(function(e){return e},function(){return(new i.default.Deferred).resolve({result:!1,canceled:!0}).promise()})},API_CANCEL:function(){var e,t=(e=regeneratorRuntime.mark(function e(t){var n=t.method;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window[yproofreading_params.api_class].abort(n);case 2:case"end":return e.stop()}},e,this)}),function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(a,i){try{var o=t[a](i),l=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(l).then(function(e){r("next",e)},function(e){r("throw",e)});e(l)}("next")})});return function(e){return t.apply(this,arguments)}}(),SELECT:function(e){var t,n=e.storeKey,r=e.selectorName,a=e.args;return(t=wp.data.select(n))[r].apply(t,o(a))},DISPATCH:function(e){var t,n=e.storeKey,r=e.actionName,a=e.args;return(t=wp.data.dispatch(n))[r].apply(t,o(a))}}},function(e,t){e.exports=jQuery},function(e,t,n){"use strict";var r=s(n(6)),a=s(n(10));n(14);var i=n(1),o=n(0),l=s(n(4));function s(e){return e&&e.__esModule?e:{default:e}}var u=wp.element.Fragment,c=wp.editPost.PluginPostStatusInfo,p=wp.components.Button,d=wp.data.dispatch;(0,wp.plugins.registerPlugin)(i.pluginName,{render:function(){return wp.element.createElement(u,null,wp.element.createElement(c,null,wp.element.createElement(u,null,wp.element.createElement("label",{className:"edit-post-post-proofreading__label",htmlFor:"edit-post-post-proofreading__toggle"},yproofreading_params.translate["Y Proofreading"]),wp.element.createElement(p,{id:"edit-post-post-proofreading__toggle",type:"button",className:"edit-post-post-proofreading__toggle",onClick:function(){d(o.storeName).start()},isLink:!0},yproofreading_params.translate.Proofreading))),wp.element.createElement(r.default,null),wp.element.createElement(a.default,null))}}),(0,l.default)(function(){var e=function(e){var t=e.clientX+8,n=window.innerWidth;return t>n-200?n-200:t};(0,l.default)(document).on({mouseenter:function(t){var n=(0,l.default)(this).data("i"),r=(0,l.default)(this).data("text");(0,l.default)("body").append('<div id="tooltips-'+n+'" class="tooltips">'+r+"</div>");var a=(0,l.default)("#tooltips-"+n),i=t.clientY;a.css({top:i+30,left:e(t)})},mousemove:function(t){var n=(0,l.default)(this).data("i"),r=(0,l.default)("#tooltips-"+n),a=t.clientY;r.css({top:a+30,left:e(t)})},mouseleave:function(){var e=(0,l.default)(this).data("i");(0,l.default)("#tooltips-"+e).remove()}},".proofreading-item")})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProofreadingModal=m;var r=o(n(7)),a=o(n(2)),i=n(0);function o(e){return e&&e.__esModule?e:{default:e}}var l=wp.components.Modal,s=wp.data,u=s.withSelect,c=s.withDispatch,p=wp.compose.compose,d=wp.i18n.__;function m(e){var t=e.isLoading,n=e.isModalActive,i=e.html,o=e.items,s=e.closeModal;return t||n?wp.element.createElement(l,{className:"edit-post-proofreading-modal",title:yproofreading_params.translate["Y Proofreading"],closeLabel:d("Close"),onRequestClose:s},t&&wp.element.createElement(r.default,null),n&&wp.element.createElement(a.default,{html:i,items:o})):null}t.default=p(u(function(e){return{isLoading:e(i.storeName).isLoading(),isModalActive:e(i.storeName).isModalActive(),html:e(i.storeName).getResultHtml(),items:e(i.storeName).getResultItems()}}),c(function(e){return{closeModal:function(){return e(i.storeName).closeModal()}}}))(m)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return wp.element.createElement("div",{className:"proofreading-spinner"},yproofreading_params.translate["Loading..."],wp.element.createElement(r,null))};var r=wp.components.Spinner},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.items;return wp.element.createElement("div",{className:"proofreading-items"},wp.element.createElement("table",{className:"widefat striped"},wp.element.createElement("tr",null,wp.element.createElement("th",null,yproofreading_params.translate["Target surface"]),wp.element.createElement("th",null,yproofreading_params.translate["Candidates of rephrasing"]),wp.element.createElement("th",null,yproofreading_params.translate["Detail info of indicated word"])),t.length<=0&&wp.element.createElement("tr",null,wp.element.createElement("td",{colSpan:"3"},yproofreading_params.translate["Item not found"])),t.length>0&&t.map(function(e){return wp.element.createElement("tr",null,wp.element.createElement("td",null,e.surface),wp.element.createElement("td",null,e.word),wp.element.createElement("td",null,e.info))})))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.html;return wp.element.createElement("div",{className:"proofreading-contents"},wp.element.createElement("div",{className:"proofreading-contents-html editor-styles-wrapper",dangerouslySetInnerHTML:{__html:t}}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProofreadingSidebar=h;var r=u(n(11)),a=u(n(12)),i=u(n(2)),o=u(n(13)),l=n(1),s=n(0);function u(e){return e&&e.__esModule?e:{default:e}}var c=wp.editPost,p=c.PluginSidebar,d=c.PluginMoreMenuItem,m=wp.components,f=m.PanelBody,g=m.PanelRow,w=wp.components.Button,_=wp.data,v=_.withSelect,E=_.withDispatch,S=wp.compose.compose,y=wp.element.Fragment;function h(e){var t=e.isValidResult,n=e.isPluginItemPinned,l=e.html,s=e.items,u=e.sidebarSize,c=e.togglePinnedPluginItem,m=e.openModal;return t?wp.element.createElement(y,null,wp.element.createElement(p,{name:"info",className:"proofreading-info-wrap",icon:wp.element.createElement(a.default,null),title:yproofreading_params.translate["Y Proofreading"]},wp.element.createElement(f,{title:yproofreading_params.translate["Proofreading info"],initialOpen:!0,className:(0,r.default)("proofreading-info",u)},wp.element.createElement(g,null,wp.element.createElement(i.default,{html:l,items:s}))),wp.element.createElement(f,{title:yproofreading_params.translate["Size setting"],initialOpen:!1},wp.element.createElement(g,null,wp.element.createElement(o.default,null))),wp.element.createElement(f,{title:yproofreading_params.translate["Open in modal"],initialOpen:!0},wp.element.createElement(g,null,wp.element.createElement(w,{type:"button",onClick:function(){m()},isLink:!0},yproofreading_params.translate["Open in modal"])))),!n&&wp.element.createElement(d,{icon:wp.element.createElement(a.default,null),onClick:function(){return c()}},yproofreading_params.translate["Pin again"])):null}t.default=S(v(function(e){return{isValidResult:e(s.storeName).isValidResult(),isPluginItemPinned:e("core/edit-post").isPluginItemPinned(l.pluginName+"/info"),html:e(s.storeName).getResultHtml(),items:e(s.storeName).getResultItems(),sidebarSize:e(s.storeName).getSidebarSize()}}),E(function(e){return{togglePinnedPluginItem:function(){return e("core/edit-post").togglePinnedPluginItem(l.pluginName+"/info")},openModal:function(){return e(s.storeName).openModal()}}}))(h)},function(e,t,n){var r;
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
!function(){"use strict";var n={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var i=typeof r;if("string"===i||"number"===i)e.push(r);else if(Array.isArray(r)&&r.length){var o=a.apply(null,r);o&&e.push(o)}else if("object"===i)for(var l in r)n.call(r,l)&&r[l]&&e.push(l)}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):void 0===(r=function(){return a}.apply(t,[]))||(e.exports=r)}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return wp.element.createElement(a,{version:"1.1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:r.iconSize+"px",height:r.iconSize+"px",viewBox:"0 0 "+r.iconSize+" "+r.iconSize,"enable-background":"new 0 0 "+r.iconSize+" "+r.iconSize},wp.element.createElement("image",{width:r.iconSize,height:r.iconSize,x:"0",y:"0",xlinkHref:yproofreading_params.plugin_icon}))};var r=n(1),a=wp.components.SVG},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SidebarSizeSwitcher=u;var r=n(0),a=wp.components.TabPanel,i=wp.compose.compose,o=wp.data,l=o.withSelect,s=o.withDispatch;function u(e){var t=e.sidebarSize,n=e.setSidebarSize;return wp.element.createElement(a,{className:"sidebar-size-switcher",activeClass:"is-active",tabs:[{name:"size-small",title:yproofreading_params.translate.Small,className:"sidebar-size size-small"},{name:"size-middle",title:yproofreading_params.translate.Middle,className:"sidebar-size size-middle"},{name:"size-large",title:yproofreading_params.translate.Large,className:"sidebar-size size-large"}],initialTabName:t,onSelect:function(e){n(e)}},function(){return null})}t.default=i(l(function(e){return{sidebarSize:e(r.storeName).getSidebarSize()}}),s(function(e){return{setSidebarSize:function(t){return e(r.storeName).setSidebarSize(t)}}}))(u)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(n(15)),a=s(n(16)),i=s(n(17)),o=u(n(3)),l=n(0);function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function u(e){return e&&e.__esModule?e:{default:e}}var c=(0,wp.data.registerStore)(l.storeName,{reducer:r.default,selectors:a,actions:i,controls:o.default,persist:["sidebarSize"]});t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isRequiredToOpenSidebar=i,t.isModalActive=o,t.response=l,t.loading=s,t.sidebarSize=u;var r=n(0),a=wp.data.combineReducers;function i(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments[1];switch(t.type){case r.START:return!1;case r.SET_RESPONSE:if(t.response.result)return!0}return e}function o(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch(arguments[1].type){case r.OPEN_MODAL:return!0;case r.CLOSE_MODAL:return!1}return e}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments[1];switch(t.type){case r.START:return null;case r.SET_RESPONSE:return t.response}return e}function s(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch(arguments[1].type){case r.START:return!0;case r.SET_RESPONSE:return!1}return e}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"size-middle",t=arguments[1];switch(t.type){case r.SIDEBAR_SIZE:switch(t.size){case"size-small":case"small":case"s":return"size-small";case"size-large":case"large":case"l":return"size-large";default:return"size-middle"}}return e}t.default=a({isRequiredToOpenSidebar:i,isModalActive:o,response:l,loading:s,sidebarSize:u})},function(e,t,n){"use strict";function r(e){return e.response&&e.response.result}Object.defineProperty(t,"__esModule",{value:!0}),t.isRequiredToOpenSidebar=function(e){return r(e)&&e.isRequiredToOpenSidebar},t.isLoading=function(e){return e.loading},t.isCanceled=function(e){return e.canceled},t.isModalActive=function(e){return e.isModalActive},t.isValidResult=r,t.getResultHtml=function(e){return r(e)?e.response.html:null},t.getResultItems=function(e){return r(e)?e.response.items:null},t.getSidebarSize=function(e){return e.sidebarSize}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.start=p,t.openModal=d,t.closeModal=m,t.cancel=f,t.setSidebarSize=function(e){return{type:r.SIDEBAR_SIZE,size:e}},t.openSidebar=g;var r=n(0),a=n(1),i=n(3),o=regeneratorRuntime.mark(p),l=regeneratorRuntime.mark(d),s=regeneratorRuntime.mark(m),u=regeneratorRuntime.mark(f),c=regeneratorRuntime.mark(g);function p(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,i.select)(r.storeName,"isLoading");case 2:if(!t.sent){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,(0,i.dispatch)("core/notices","removeNotice",r.NOTICE_ID);case 6:return t.next=8,{type:r.START};case 8:return t.next=10,(0,i.apiFetch)("proofreading",{sentence:wp.data.select("core/editor").getEditedPostContent()});case 10:return e=t.sent,t.next=13,{type:r.SET_RESPONSE,response:e};case 13:if(e.result||e.canceled){t.next=16;break}return t.next=16,(0,i.dispatch)("core/notices","createErrorNotice",e.message,{id:r.NOTICE_ID});case 16:return t.next=18,g();case 18:case"end":return t.stop()}},o,this)}function d(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,{type:r.OPEN_MODAL};case 2:case"end":return e.stop()}},l,this)}function m(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.select)(r.storeName,"isLoading");case 2:if(!e.sent){e.next=5;break}return e.next=5,f();case 5:return e.next=7,{type:r.CLOSE_MODAL};case 7:case"end":return e.stop()}},s,this)}function f(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.select)(r.storeName,"isLoading");case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,(0,i.apiCancel)("proofreading");case 6:case"end":return e.stop()}},u,this)}function g(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.select)(r.storeName,"isValidResult");case 2:if(!e.sent){e.next=5;break}return e.next=5,(0,i.dispatch)("core/edit-post","openGeneralSidebar",a.pluginName+"/info");case 5:case"end":return e.stop()}},c,this)}}]);