/*!
 * y-proofreading 0.0.1
 * Copyright (c) 2019 Technote <technote.space@gmail.com> (https://technote.space)
 * License: GPL-3.0
 */!function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=2)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.storeName="y-proofreading",t.START="@@YPROOFREADING/START",t.SET_RESPONSE="@@YPROOFREADING/SET_RESPONSE",t.CLOSE_MODAL="@@YPROOFREADING/CLOSE_MODAL",t.NOTICE_ID="YPROOFREADING_MESSAGE"},function(e,t,r){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.apiFetch=function(e,t){return{type:"API_FETCH",method:e,args:t}},t.dispatch=function(e,t){for(var r=arguments.length,n=Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];return{type:"DISPATCH",storeKey:e,actionName:t,args:n}},t.select=function(e,t){for(var r=arguments.length,n=Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];return{type:"SELECT",storeKey:e,selectorName:t,args:n}},t.default={API_FETCH:function(e){var t=e.method,r=e.args;return window[yproofreading_params.api_class].ajax(t,r)},SELECT:function(e){var t,r=e.storeKey,a=e.selectorName,o=e.args;return(t=wp.data.select(r))[a].apply(t,n(o))},DISPATCH:function(e){var t,r=e.storeKey,a=e.actionName,o=e.args;return(t=wp.data.dispatch(r))[a].apply(t,n(o))}}},function(e,t,r){"use strict";var n=s(r(3));r(8);var a=r(0),o=s(r(12));function s(e){return e&&e.__esModule?e:{default:e}}var i=wp.element.Fragment,l=wp.editPost.PluginPostStatusInfo,u=wp.components.Button,c=wp.data.dispatch;(0,wp.plugins.registerPlugin)("y-proofreading",{render:function(){return wp.element.createElement(i,null,wp.element.createElement(l,null,wp.element.createElement(i,null,wp.element.createElement("label",{className:"edit-post-post-proofreading__label",htmlFor:"edit-post-post-proofreading__toggle"},yproofreading_params.translate.Proofreading),wp.element.createElement(u,{id:"edit-post-post-proofreading__toggle",type:"button",className:"edit-post-post-proofreading__toggle",onClick:function(){c(a.storeName).start()},isLink:!0},yproofreading_params.translate.Proofreading))),wp.element.createElement(n.default,null))}}),(0,o.default)(function(){(0,o.default)(document).on({mouseenter:function(e){var t=(0,o.default)(this).data("i"),r=(0,o.default)(this).data("text");(0,o.default)("body").append('<div id="tooltips-'+t+'" class="tooltips">'+r+"</div>");var n=(0,o.default)("#tooltips-"+t),a=e.pageX,s=e.pageY;n.css({top:s+14,left:a+14})},mousemove:function(e){var t=(0,o.default)(this).data("i"),r=(0,o.default)("#tooltips-"+t),n=e.pageX,a=e.pageY;r.css({top:a+14,left:n+14})},mouseleave:function(){var e=(0,o.default)(this).data("i");(0,o.default)("#tooltips-"+e).remove()}},".proofreading-item")})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProofreadingModal=f;var n=s(r(4)),a=s(r(5)),o=r(0);function s(e){return e&&e.__esModule?e:{default:e}}var i=wp.components.Modal,l=wp.data,u=l.withSelect,c=l.withDispatch,d=wp.compose.compose,p=wp.i18n.__;function f(e){var t=e.isLoading,r=e.isModalActive,o=e.html,s=e.items,l=e.closeModal;return t||r?wp.element.createElement(i,{className:"edit-post-proofreading-modal",title:yproofreading_params.translate.Proofreading,closeLabel:p("Close"),onRequestClose:l},t&&wp.element.createElement(n.default,null),r&&wp.element.createElement(a.default,{html:o,items:s})):null}t.default=d(u(function(e){return{isLoading:e(o.storeName).isLoading(),isModalActive:e(o.storeName).isModalActive(),html:e(o.storeName).getResultHtml(),items:e(o.storeName).getResultItems()}}),c(function(e){return{closeModal:function(){return e(o.storeName).closeModal()}}}))(f)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return wp.element.createElement("div",{className:"proofreading-spinner"},yproofreading_params.translate["Loading..."],wp.element.createElement(n,null))};var n=wp.components.Spinner},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.html,r=e.items;return wp.element.createElement(s,{className:"proofreading-tab-panel",activeClass:"is-active",tabs:[{name:"contents-tab",title:yproofreading_params.translate["Proofreading contents"],className:"contents-tab proofreading__panel-tab"},{name:"items-tab",title:yproofreading_params.translate["Proofreading info"],className:"items-tab proofreading__panel-tab"}]},function(e){return wp.element.createElement("div",null,"contents-tab"===e.name&&wp.element.createElement(a.default,{html:t}),"items-tab"===e.name&&wp.element.createElement(n.default,{items:r}))})};var n=o(r(6)),a=o(r(7));function o(e){return e&&e.__esModule?e:{default:e}}var s=wp.components.TabPanel;wp.element.Fragment},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.items;return wp.element.createElement("div",{className:"proofreading-items"},wp.element.createElement("div",{className:"proofreading-items-table",dangerouslySetInnerHTML:{__html:t}}))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.html;return wp.element.createElement("div",{className:"proofreading-contents"},wp.element.createElement("div",{className:"proofreading-contents-html editor-styles-wrapper",dangerouslySetInnerHTML:{__html:t}}))}},function(e,t,r){"use strict";var n=u(r(9)),a=l(r(10)),o=l(r(11)),s=u(r(1)),i=r(0);function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function u(e){return e&&e.__esModule?e:{default:e}}(0,wp.data.registerStore)(i.storeName,{reducer:n.default,selectors:a,actions:o,controls:s.default})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0);t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isModalActive:!1,loading:!1,response:null},t=arguments[1];switch(t.type){case n.START:if(e.loading)return;return e.loading=!0,e;case n.SET_RESPONSE:return e.response=t.response,e.response.result&&(e.isModalActive=!0),e.loading=!1,e;case n.CLOSE_MODAL:return e.isModalActive=!1,e;default:return e}}},function(e,t,r){"use strict";function n(e){return e.response&&e.response.result}Object.defineProperty(t,"__esModule",{value:!0}),t.isLoading=function(e){return e.loading},t.isCanceled=function(e){return e.canceled},t.isModalActive=function(e){return e.isModalActive},t.isSuccess=n,t.getResultHtml=function(e){return n(e)?e.response.html:null},t.getResultItems=function(e){return n(e)?e.response.items:null}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.start=i,t.closeModal=l;var n=r(0),a=r(1),o=regeneratorRuntime.mark(i),s=regeneratorRuntime.mark(l);function i(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,a.select)(n.storeName,"isLoading");case 2:if(!t.sent){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,{type:n.START};case 6:return wp.data.dispatch("core/notices").createInfoNotice(yproofreading_params.translate["Loading..."],{id:n.NOTICE_ID}),t.next=9,(0,a.apiFetch)("proofreading",{sentence:wp.data.select("core/editor").getEditedPostContent()});case 9:return e=t.sent,t.next=12,{type:n.SET_RESPONSE,response:e};case 12:e.result?wp.data.dispatch("core/notices").createSuccessNotice(e.message,{id:n.NOTICE_ID}):wp.data.dispatch("core/notices").createErrorNotice(e.message,{id:n.NOTICE_ID});case 13:case"end":return t.stop()}},o,this)}function l(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,{type:n.CLOSE_MODAL};case 2:wp.data.dispatch("core/notices").removeNotice(n.NOTICE_ID);case 3:case"end":return e.stop()}},s,this)}},function(e,t){e.exports=jQuery}]);